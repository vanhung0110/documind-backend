# ===================================================================
# DOCUMINDAI APPLICATION CONFIGURATION
# ===================================================================

spring.application.name=DocumindAI
spring.profiles.active=dev

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
server.port=${PORT:8080}
server.servlet.context-path=/api
server.error.include-message=always
server.error.include-binding-errors=always

# ===================================================================
# DATABASE CONFIGURATION (MySQL)
# ===================================================================
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_DATABASE:documindai_db}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Ho_Chi_Minh
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===================================================================
# JPA / HIBERNATE CONFIGURATION
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===================================================================
# FILE UPLOAD CONFIGURATION
# ===================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# Upload directory
app.upload.dir=uploads/documents
app.upload.allowed-extensions=pdf,doc,docx,txt

# ===================================================================
# JWT CONFIGURATION
# ===================================================================
app.jwt.secret=${JWT_SECRET:DocumindAI2024SecretKeyForJWTTokenGenerationAndValidation}
app.jwt.expiration-ms=86400000
app.jwt.refresh-expiration-ms=604800000

# ===================================================================
# OPENAI API CONFIGURATION
# ===================================================================
openai.api.key=${OPENAI_API_KEY:your-openai-api-key-here}
openai.model=gpt-4
openai.embedding.model=text-embedding-3-small
openai.max.tokens=3000
openai.temperature=0.8
openai.top.p=0.95
openai.frequency.penalty=0.3
openai.presence.penalty=0.3
openai.system.prompt=Role: Bạn là DOCUMIND AI, trợ lý chuyên hỗ trợ tra cứu tài liệu nội bộ. \
Task: Nhiệm vụ duy nhất của bạn là trả lời câu hỏi dựa trên thông tin được cung cấp trong Knowledge Base (tài liệu người dùng tải lên). \
    Constraints (Quy tắc bắt buộc): \
    1. Ưu tiên tài liệu: Luôn luôn quét qua tài liệu được tải lên trước khi trả lời. \
    2. Trung thực: Nếu tài liệu có thông tin, hãy trích xuất chính xác con số. Tuyệt đối KHÔNG dùng kiến thức bên ngoài để phủ nhận hoặc bịa đặt thông tin. \
    3. Dẫn chứng: Khi trả lời, hãy chỉ ra thông tin đó nằm ở phần nào (ví dụ: 'Theo mục Thông số kỹ thuật...'). \
    4. Không từ chối: Đừng nói 'Tôi không thể cung cấp thông tin sản phẩm cụ thể'. Thay vào đó, hãy nói 'Dựa trên tài liệu bạn cung cấp, thông tin là...' \
    5. Ngôn ngữ: Luôn trả lời bằng TIẾNG VIỆT.

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging.level.root=INFO
logging.level.com.documindai=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/documindai.log

# ===================================================================
# CORS CONFIGURATION
# ===================================================================
app.cors.allowed-origins=http://localhost:3000,http://localhost:5173,http://localhost:19006,exp://192.168.1.*:19000
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ===================================================================
# ADMIN DEFAULT ACCOUNT
# ===================================================================
app.admin.default.username=admin
app.admin.default.password=Admin@123
app.admin.default.email=admin@documindai.com

# ===================================================================
# APPLICATION SETTINGS
# ===================================================================
app.name=DocumindAI
app.version=1.0.0
app.description=AI-powered document chatbot
app.chat.history.limit=50
app.document.chunk.size=1000
app.document.chunk.overlap=200
app.embedding.dimension=1536
app.similarity.threshold=0.3
app.max.context.chunks=5
app.conversation.context.messages=10
